{% extends 'client/base.html' %}

{% block title %} Documentation {% endblock %} 
{% block content %}
<div class="container mx-auto p-5">
  <!-- Table of Contents (TOC) Column -->
  <div class="flex flex-wrap -mx-4 mb-8">
    <div class="w-full md:w-1/3 px-4 mb-4">
      <div class="bg-white shadow-md rounded-lg p-6">
        <ul class="list-disc pr-6">
          <li class="list-none p-3 hover:bg-gray-700 hover:text-white rounded">
            <a href="#getting-started">Getting Started</a>
          </li>
          <li class="list-none p-3 hover:bg-gray-700 hover:text-white rounded">
            <a href="#features">Endpoints</a>
          </li>
          <li class="list-none p-3 hover:bg-gray-700 hover:text-white rounded">
            <a href="#code-examples">Code Examples</a>
          </li>
          <li class="list-none p-3 hover:bg-gray-700 hover:text-white rounded">
            <a href="#rate-limiting">Rate Limiting</a>
          </li>
          <li class="list-none p-3 hover:bg-gray-700 hover:text-white rounded">
            <a href="#error">Error Codes</a>
          </li>
          <li class="list-none p-3 hover:bg-gray-700 hover:text-white rounded">
            <a href="#billing">Billing</a>
          </li>
          <li class="list-none p-3 hover:bg-gray-700 hover:text-white rounded">
            <a href="#github">pamuiafrika on GitHub</a>
          </li>
        </ul>
      </div>
    </div>

    <!-- Content Column -->
    <div class="w-full md:w-2/3 px-4 mb-8">
      <!-- Getting Started Section -->
      <section
        id="getting-started"
        class="bg-white shadow-md rounded-lg p-6 mb-4"
      >
        <h1 class="text-3xl font-bold mb-4">API Documentation</h1>

        <p class="mb-2">
          The Pesa API was built to offer a straightforward and reliable
          solution for delivering real-time, accurate and reliable exchange rate
          data for multiple currencies around the world. .
        </p>

        <p class="mb-4">
          The following API documentation will provide detailed information
          about API integration methods, available endpoints, request parameters
          and response objects. In the last section you will be able to browse a
          series of simple code examples in different programming languages.
        </p>
        <h2 class="text-2xl font-semibold mb-4">Getting Started</h2>

        <h3 class="text-lg font-semibold mb-2">
          API Access Key 
        </h3>
        <p class="mb-3">
          Each registered Pesa API account is associated with a unique API
          access key, which is used to authenticate with the API.
          You can find your personal API access key by logging in to your
          account dashboard.
        </p>
        <p class="mb-2">
          To start making API requests, please authenticate with the API in
          accordance with the example request below.
        </p>
        <div class="bg-gray-100 rounded-lg p-4 mt-4 relative mb-4">
          <button
            class="absolute top-2 right-16 bg-green-500 text-white px-3 py-1 rounded-md hover:bg-green-600"
            onclick="runDemoAPI('/v1/forward')"
          >
            Run
          </button>
          <button
            class="absolute top-2 right-2 bg-blue-500 text-white px-3 py-1 rounded-md hover:bg-blue-600"
            onclick="copyToClipboard('authExample')"
          >
            Copy
          </button>
          <pre class="overflow-x-auto max-w-full p-2" id="authExample">

POST http://pesa.api/v1/quote?
base=USD&apikey=YOUR_ACCESS_KEY
</pre
          >
        </div>
        <p>
          <strong class="mb-3">Important:</strong> Please keep your API access key safe. If
          compromised, generate a new key from your dashboard.
        </p>

        <h3 class="text-lg font-semibold mb-2">HTTPS Encryption</h3>
        <p>
          256-bit HTTPS encryption is available on the Basic Plan and higher.
        </p>
        <p>Example API request using HTTPS:</p>
        <div class="bg-gray-100 rounded-lg p-4 mt-4 relative">
          <button
            class="absolute top-2 right-16 bg-green-500 text-white px-3 py-1 rounded-md hover:bg-green-600"
            onclick="runDemoAPI('/v1/forward')"
          >
            Run
          </button>
          <button
            class="absolute top-2 right-2 bg-blue-500 text-white px-3 py-1 rounded-md hover:bg-blue-600"
            onclick="copyToClipboard('httpsExample')"
          >
            Copy
          </button>
          <pre class="overflow-x-auto max-w-full p-2" id="httpsExample">


</pre
          >
        </div>
      </section>

      <!-- Features Section -->
      <section id="features" class="bg-white shadow-md rounded-lg p-6 mb-6">
        <h2 class="text-2xl font-semibold mb-4">Endpoints</h2>
        <p>
          The Pesa API API offers a straightforward and reliable solution
          for forward and reverse geocoding, covering more than 2 billion places
          and addresses worldwide. Features include batch geocoding,
          multi-language support, embeddable map URLs, and more.
        </p>
        <p>
          API results can be delivered in JSON, XML, or geocode-specific
          GeoJSON.
        </p>
        <p>
          Average API response times range between 10ms and 100ms depending on
          the request size.
        </p>
        <br>
        <div class="container mx-auto">
          <div class="bg-white rounded-lg shadow overflow-hidden">
  
              <!-- Endpoint: quote_currency -->
              <div class="p-4 border-b">
                  <h2 class="text-xl font-semibold mb-2">GET /quote/</h2>
                  <p class="text-gray-700 mb-2">Retrieve currency conversion quote.</p>
                  <div class="bg-gray-100 rounded-lg p-4 mb-4">
                      <p class="font-semibold mb-3">Base URL: <span class="text-blue-600">http://pesa.api</span></p>
                      <p class="font-semibold ">Parameters:</p>
                      <ul class="list-disc list-inside mb-3">
                          <li><span class="font-semibold">apikey</span> (required): API key for authentication.</li>
                          <li><span class="font-semibold">base</span> (required): Base currency code.</li>
                          <li><span class="font-semibold">target</span> (required): Target currency code.</li>
                      </ul>
                      <p class="font-semibold mb-3">Example Request:</p>
                      <pre class="bg-gray-200 p-2 rounded"><code>
GET /quote/?apikey=cbe828ab-e9bb-4713-bff7-be9c4f7c330c&amp;base=USD&amp;target=TZS HTTP/1.1
Content-Type: application/json</code></pre>
                      <p class="font-semibold">Example Response:</p>
                      <pre class="bg-gray-200 p-2 rounded"><code>{
      "base": "USD",
      "target": "TZS",
      "rate": "2,653.8820"
  }</code></pre>
                  </div>
              </div>
  
              <!-- Endpoint: convert_currency -->
              <div class="p-4 border-b">
                  <h2 class="text-xl font-semibold mb-2">POST /convert/</h2>
                  <p class="text-gray-700 mb-2">Convert currency.</p>
                  <!-- Add content similar to above for each endpoint -->
              </div>
  
              <!-- Endpoint: stock-data -->
              <div class="p-4 border-b">
                  <h2 class="text-xl font-semibold mb-2">GET /stock/</h2>
                  <p class="text-gray-700 mb-2">Fetch live stock data.</p>
                  <!-- Add content similar to above for each endpoint -->
              </div>
  
              <!-- Endpoint: crypto-data -->
              <div class="p-4">
                  <h2 class="text-xl font-semibold mb-2">GET /crypto/</h2>
                  <p class="text-gray-700 mb-2">Fetch live cryptocurrency data.</p>
                  <!-- Add content similar to above for each endpoint -->
              </div>
  
          </div>
      </div>
      </section>

      <!-- Advanced Data Section -->
      


      <!-- Code Examples Section -->
      <section
        id="code-examples"
        class="bg-white shadow-md rounded-lg p-6 mb-6"
      >
        <h2 class="text-2xl font-semibold mb-4">Code Examples</h2>
        <p>
          Browse through simple code examples in various programming languages
          to integrate Pesa API functionalities into your applications.
        </p>
        <!-- Example code snippets in different languages -->
        <div class="flex flex-wrap -mx-4">
          <div class="w-full md:w-1/2 px-4 mb-4">
            <h3 class="text-lg font-semibold mb-2">Python</h3>
            <pre class="bg-gray-100 rounded-lg p-4 overflow-x-auto small">
import requests

url = 'http://localhost:8000/api/quote/'
params = {
    'base': 'USD',
    'target': 'TZS',
    'apikey': '873f32bc-009b-4572-a035-f3db52d2591a'
}
                
response = requests.get(url, params=params)
data = response.json()
                
print(data) </pre
            >
          </div>
          <div class="w-full md:w-1/2 px-4 mb-4">
            <h3 class="text-lg font-semibold mb-2">JQuery</h3>
            <pre class="bg-gray-100 rounded-lg p-4 overflow-x-auto">
$.ajax({
    url: 'http://localhost:8000/api/quote/',
    method: 'GET',
    data: {
        base: 'USD',
        target: 'TZS',
        apikey: '873f32bc-009b-4572-a035-f3db52d2591a'
    },
    success: function(response) {
        console.log(response);  
    },
    error: function(xhr, status, error) {
        console.error('Error:', error); 
    }
});
</pre
            >
          </div>
          <div class="w-full md:w-1/2 px-4 mb-4">
            <h3 class="text-lg font-semibold mb-2">PHP</h3>
            <pre class="bg-gray-100 rounded-lg p-4 overflow-x-auto">
?php
$url = 'http://localhost:8000/api/quote/';
$params = [
    'base' => 'USD',
    'target' => 'TZS',
    'apikey' => '873f32bc-009b-4572-a035-f3db52d2591a'
];

$options = [
    'http' => [
        'method' => 'GET',
        'content' => http_build_query($params)
    ]
];

$context = stream_context_create($options);
$response = file_get_contents($url . '?' . http_build_query($params), false, $context);
$data = json_decode($response, true);

var_dump($data); 
?>
</pre
            >
          </div>
          <div class="w-full md:w-1/2 px-4 mb-4">
            <h3 class="text-lg font-semibold mb-2">Nodejs</h3>
            <pre class="bg-gray-100 rounded-lg p-4 overflow-x-auto">
const axios = require('axios');

const url = 'http://localhost:8000/api/quote/';
const params = {
    base: 'USD',
    target: 'TZS',
    apikey: '873f32bc-009b-4572-a035-f3db52d2591a'
};

axios.get(url, { params })
    .then(response => {
        console.log(response.data);  // Log the JSON response
    })
    .catch(error => {
        console.error('Error:', error);  // Log any errors
    });
</pre
            >
          </div>
          <!-- Add similar sections for other languages -->
        </div>
      </section>



      <!-- Additional Options Section -->
      <section id="rate-limiting" class="bg-white shadow-md rounded-lg p-6 mb-6">
        <h2 class="text-2xl font-semibold mb-4">Rate Limiting Information</h2>

        <div class="mb-4">
            <h3 class="text-lg font-semibold mb-2">Why Rate Limiting?</h3>
            <p>
                Rate limiting is a crucial aspect of API management that helps maintain service availability,
                prevent abuse, and ensure fair usage among all users of the positionstack API.
            </p>
        </div>

        <div class="mb-4">
            <h3 class="text-lg font-semibold mb-2">Rate Limiting Policies</h3>
            <p>
                positionstack implements rate limiting policies to control the number of requests that can be
                made to the API within a specified time period (typically per minute or per hour).
            </p>
            <p>
                The rate limits are enforced based on the plan subscribed by the user, ensuring that each plan
                level receives appropriate resource allocation.
            </p>
        </div>

        <div class="mb-4">
            <h3 class="text-lg font-semibold mb-2">Managing Rate Limits</h3>
            <p>
                Users can monitor their API usage and rate limits through the positionstack dashboard.
                This visibility helps users stay within their allocated limits and avoid disruptions in service.
            </p>
            <p>
                When rate limits are exceeded, users may receive HTTP status code 429 (Too Many Requests),
                indicating that further requests will be rejected until the rate limit period resets.
            </p>
        </div>

        <div class="mb-4">
            <h3 class="text-lg font-semibold mb-2">Adjusting Rate Limits</h3>
            <p>
                Depending on their subscription plan and usage patterns, users can adjust their rate limits
                through the dashboard or by contacting support for assistance.
            </p>
            <p>
                For enterprise-level customers or specific use cases, customized rate limit adjustments
                can be discussed with our support team to optimize API performance and user experience.
            </p>
        </div>

    </section>


      <!-- Billing Section -->

      <section id="billing" class="bg-white shadow-md rounded-lg p-6 mb-6">
        <h2 class="text-2xl font-semibold mb-4">Billing Information</h2>

        <div class="mb-4">
            <h3 class="text-lg font-semibold mb-2">Billing Plans</h3>
            <p class="mb-3">
                Pesa API offers flexible billing plans tailored to different usage needs.
                Whether you are a developer testing the API or a business with high-volume requests,
                there's a plan that suits your requirements.
            </p>
            <ul class="list-disc pl-6">
                <li><strong>Basic Plan:</strong> Suitable for small-scale use with limited requests per month.</li>
                <li><strong>Developer Plan:</strong> Suitable for developers use with limited requests per month.</li>
                <li><strong>Pro Plan:</strong> Ideal for growing businesses with moderate API usage.</li>
                <li><strong>Enterprise Plan:</strong> Customizable plan for large-scale deployments and heavy API usage.</li>
            </ul>
        </div>

        <div class="mb-4">
            <h3 class="text-lg font-semibold mb-2">Billing Overages</h3>
            <p class="mb-2">
                If you exceed the request limits specified in your plan, additional charges may apply.
                You can monitor your usage and upgrade your plan as necessary to avoid overages.
            </p>
            <p class="mb-2">
                Our billing system ensures transparency and flexibility, allowing you to manage costs
                effectively based on your API usage patterns.
            </p>
        </div>

        <div class="mb-4">
            <h3 class="text-lg font-semibold mb-2">Platinum Support</h3>
            <p class="mb-2">
                For mission-critical applications and dedicated support needs, consider our Platinum Support option.
                This includes priority response times, dedicated account management, and proactive monitoring.
            </p>
            <p class="mb-2">
                Contact our sales team to learn more about Platinum Support and how it can benefit your organization.
            </p>
        </div>

    </section>


      <section id="error" class="bg-white shadow-md rounded-lg p-6 mb-6">
        <h2 class="text-2xl font-semibold mb-4">Error Codes</h2>
        <p class="mb-4">If your API request fails, the API will return an error object, which contains the sub-objects code and message indicating which type of error has occurred. If a validation_error occurs, there will be an additional context sub-object containing information about one or multiple validation errors.</p>

        <div class="mb-4">
            <h3 class="text-lg font-semibold mb-2">400 Bad Request</h3>
            <p><strong>Description:</strong> The request was invalid or malformed.</p>
            <p><strong>Example Response:</strong></p>
            <pre class="bg-gray-100 rounded-lg p-4 overflow-x-auto">
{
    "error": "Bad Request",
    "message": "Invalid parameters provided."
}
</pre>
        </div>

        <div class="mb-4">
            <h3 class="text-lg font-semibold mb-2">401 Unauthorized</h3>
            <p><strong>Description:</strong> Authentication credentials were missing or incorrect.</p>
            <p><strong>Example Response:</strong></p>
            <pre class="bg-gray-100 rounded-lg p-4 overflow-x-auto">
{
    "error": "Unauthorized",
    "message": "Authentication credentials are missing or incorrect."
}
</pre>
        </div>

        <div class="mb-4">
            <h3 class="text-lg font-semibold mb-2">404 Not Found</h3>
            <p><strong>Description:</strong> The requested resource was not found.</p>
            <p><strong>Example Response:</strong></p>
            <pre class="bg-gray-100 rounded-lg p-4 overflow-x-auto">
{
    "error": "Not Found",
    "message": "The requested resource was not found."
}
</pre>
        </div>
        <p class="mb-5">
            You can always <a href="#" class="text-blue-500 hover:underline">contact for support</a> and ask for more assistance. We'll be glad to assist you with building your product. 
        </p>
        <!-- Add more error codes as necessary -->

    </section>

      <!-- positionstack on GitHub Section -->
      <section id="github" class="bg-white shadow-md rounded-lg p-6 mb-6">
        <h2 class="text-2xl font-semibold mb-4">Follow us on GitHub</h2>
        <p>
          Explore pamuiafrika's open-source projects and contributions on
          GitHub.
        </p>
        <a
          href="https://github.com/pamuiafrika"
          class="text-blue-500 hover:underline"
          >pamuiafrika on GitHub</a
        >
      </section>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  function copyToClipboard(elementId) {
    var copyText = document.getElementById(elementId);
    var textarea = document.createElement("textarea");
    textarea.textContent = copyText.innerText;
    document.body.appendChild(textarea);
    textarea.select();
    document.execCommand("copy");
    textarea.remove();

    Swal.fire({
      toast: true,
      position: "top-end",
      icon: "success",
      title: "Copied to clipboard",
      showConfirmButton: false,
      timer: 3000,
      timerProgressBar: true,
    });
  }

  function runDemoAPI(endpoint) {
    Swal.fire({
      icon: "success",
      title: "Demo API call successful",
      showConfirmButton: false,
      timer: 3000,
      timerProgressBar: true,
    });
  }
</script>

{% endblock %}
